"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("reflect-metadata");
const typeorm_1 = require("typeorm");
const dotenv_1 = require("dotenv");
dotenv_1.config();
exports.default = typeorm_1.createConnection({
    type: 'postgres',
    username: process.env.DB_USERNAME,
    host: process.env.DB_HOST,
    database: process.env.DB_NAME,
    password: process.env.DB_PASSWORD,
    port: 5432,
    schema: "",
    synchronize: false,
    logging: false,
    entities: [__dirname + "/*-model.js"]
});
/*connection.then( conn => conn.query(
`CREATE TABLE IF NOT EXISTS private_executor
(
    id              serial NOT NULL,      -- ідентифікатор приватного виконавця
    user_login      text NOT NULL         -- логін реєстратора, що зареєстрував
    district_id     serial NOT NULL,      -- ідентифікатор виконавчого округу
    fullname        text NOT NULL,        -- ПІБ
    is_active       boolean NOT NULL,     -- діє/недіє
    certificate_num text NOT NULL,        -- номер посвідчення
    rec_certif_on   text NOT NULL,        -- дата видачі посвідчення
    office_addr     text NOT NULL,        -- адреса офісу
    started_out_on  text NOT NULL,        -- дата початку здійснення діяльності
    created_on      text NOT NULL,        -- дата реєстрації


    CONSTRAINT private_executor_pkey PRIMARY KEY (id),
    CONSTRAINT priv_exc_to_user_fkey FOREIGN KEY (user_login)
        REFERENCES user (login) MATCH FULL
        ON UPDATE RESTRICT
        ON DELETE RESTRICT,
    CONSTRAINT priv_exc_to_exec_dist_fkey FOREIGN KEY (district_id)
        REFERENCES execution_district (id) MATCH FULL
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
)

CREATE TABLE TABLE IF NOT EXISTS execution_district
(
    id                  serial NOT NULL,    -- ідентифікатор виконавчого округу
    district_name       text NOT NULL,      -- назва округу
    CONSTRAINT execution_district_pkey PRIMARY KEY (id)
)

CREATE TABLE IF NOT EXISTS user
(
    login             text NOT NULL,    -- логін користувача
    fullname          text NOT NULL,    -- ПІБ
    role              int NOT NULL,     -- роль(Адміністратор/реєстратор)
    date_registration text NOT NULL,    -- дата реєстрації
    pwd_hash          text NOT NULL,    -- хеш паролю
    is_active         boolean NOT NULL, -- статус(дійсний/вимкнений)
    additional_data   text NOT NULL,    -- додаткові дані
    
    CONSTRAINT users_pkey PRIMARY KEY (login)
    CONSTRAINT fullname_ukey UNIQUE(fullname)
)

CREATE TABLE IF NOT EXISTS journal_event
(
    id           serial NOT NULL, -- id події
    user_login   text NOT NULL,   -- логін користувача
    event_date   date NOT NULL,   -- дата події
    event_type   int NOT NULL,    -- тип події
    row_affected text NOT NULL,   -- строка таблиці де подія відбулася
    new_value    text NOT NULL,   -- нове значення
    user_ip      text NOT NULL,   -- ІP користувача, що спричинив подію

    CONSTRAINT journal_actions_pkey PRIMARY KEY (id),
    CONSTRAINT journal_event_to_user_fkey FOREIGN KEY (user_login)
        REFERENCES user (login) MATCH FULL
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
)`
    )
);*/ 
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YWJhc2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbW9kZWxzL2RhdGFiYXNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNEJBQTBCO0FBQzFCLHFDQUEyQztBQUMzQyxtQ0FBZ0M7QUFFaEMsZUFBTSxFQUFFLENBQUM7QUFFVCxrQkFBZSwwQkFBZ0IsQ0FBQztJQUMvQixJQUFJLEVBQUUsVUFBVTtJQUVoQixRQUFRLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXO0lBQ2pDLElBQUksRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLE9BQU87SUFDekIsUUFBUSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTztJQUM3QixRQUFRLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXO0lBQ2pDLElBQUksRUFBRSxJQUFJO0lBQ1AsTUFBTSxFQUFFLEVBQUU7SUFFVixXQUFXLEVBQUUsS0FBSztJQUNsQixPQUFPLEVBQUUsS0FBSztJQUNkLFFBQVEsRUFBRSxDQUFDLFNBQVMsR0FBRyxhQUFhLENBQUM7Q0FDeEMsQ0FBQyxDQUFDO0FBRUg7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFnRUkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXCJyZWZsZWN0LW1ldGFkYXRhXCI7XG5pbXBvcnQgeyBjcmVhdGVDb25uZWN0aW9uIH0gZnJvbSBcInR5cGVvcm1cIjtcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gXCJkb3RlbnZcIjtcblxuY29uZmlnKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbm5lY3Rpb24oe1xuXHR0eXBlOiAncG9zdGdyZXMnLFxuXHRcblx0dXNlcm5hbWU6IHByb2Nlc3MuZW52LkRCX1VTRVJOQU1FLFxuXHRob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NULFxuXHRkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSxcblx0cGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JELFxuXHRwb3J0OiA1NDMyLFxuICAgIHNjaGVtYTogXCJcIixcblxuICAgIHN5bmNocm9uaXplOiBmYWxzZSxcbiAgICBsb2dnaW5nOiBmYWxzZSxcbiAgICBlbnRpdGllczogW19fZGlybmFtZSArIFwiLyotbW9kZWwuanNcIl1cbn0pO1xuXG4vKmNvbm5lY3Rpb24udGhlbiggY29ubiA9PiBjb25uLnF1ZXJ5KFxuYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHByaXZhdGVfZXhlY3V0b3JcbihcbiAgICBpZCAgICAgICAgICAgICAgc2VyaWFsIE5PVCBOVUxMLCAgICAgIC0tINGW0LTQtdC90YLQuNGE0ZbQutCw0YLQvtGAINC/0YDQuNCy0LDRgtC90L7Qs9C+INCy0LjQutC+0L3QsNCy0YbRj1xuICAgIHVzZXJfbG9naW4gICAgICB0ZXh0IE5PVCBOVUxMICAgICAgICAgLS0g0LvQvtCz0ZbQvSDRgNC10ZTRgdGC0YDQsNGC0L7RgNCwLCDRidC+INC30LDRgNC10ZTRgdGC0YDRg9Cy0LDQslxuICAgIGRpc3RyaWN0X2lkICAgICBzZXJpYWwgTk9UIE5VTEwsICAgICAgLS0g0ZbQtNC10L3RgtC40YTRltC60LDRgtC+0YAg0LLQuNC60L7QvdCw0LLRh9C+0LPQviDQvtC60YDRg9Cz0YNcbiAgICBmdWxsbmFtZSAgICAgICAgdGV4dCBOT1QgTlVMTCwgICAgICAgIC0tINCf0IbQkVxuICAgIGlzX2FjdGl2ZSAgICAgICBib29sZWFuIE5PVCBOVUxMLCAgICAgLS0g0LTRltGUL9C90LXQtNGW0ZRcbiAgICBjZXJ0aWZpY2F0ZV9udW0gdGV4dCBOT1QgTlVMTCwgICAgICAgIC0tINC90L7QvNC10YAg0L/QvtGB0LLRltC00YfQtdC90L3Rj1xuICAgIHJlY19jZXJ0aWZfb24gICB0ZXh0IE5PVCBOVUxMLCAgICAgICAgLS0g0LTQsNGC0LAg0LLQuNC00LDRh9GWINC/0L7RgdCy0ZbQtNGH0LXQvdC90Y9cbiAgICBvZmZpY2VfYWRkciAgICAgdGV4dCBOT1QgTlVMTCwgICAgICAgIC0tINCw0LTRgNC10YHQsCDQvtGE0ZbRgdGDXG4gICAgc3RhcnRlZF9vdXRfb24gIHRleHQgTk9UIE5VTEwsICAgICAgICAtLSDQtNCw0YLQsCDQv9C+0YfQsNGC0LrRgyDQt9C00ZbQudGB0L3QtdC90L3RjyDQtNGW0Y/Qu9GM0L3QvtGB0YLRllxuICAgIGNyZWF0ZWRfb24gICAgICB0ZXh0IE5PVCBOVUxMLCAgICAgICAgLS0g0LTQsNGC0LAg0YDQtdGU0YHRgtGA0LDRhtGW0ZdcblxuXG4gICAgQ09OU1RSQUlOVCBwcml2YXRlX2V4ZWN1dG9yX3BrZXkgUFJJTUFSWSBLRVkgKGlkKSxcbiAgICBDT05TVFJBSU5UIHByaXZfZXhjX3RvX3VzZXJfZmtleSBGT1JFSUdOIEtFWSAodXNlcl9sb2dpbilcbiAgICAgICAgUkVGRVJFTkNFUyB1c2VyIChsb2dpbikgTUFUQ0ggRlVMTFxuICAgICAgICBPTiBVUERBVEUgUkVTVFJJQ1RcbiAgICAgICAgT04gREVMRVRFIFJFU1RSSUNULFxuICAgIENPTlNUUkFJTlQgcHJpdl9leGNfdG9fZXhlY19kaXN0X2ZrZXkgRk9SRUlHTiBLRVkgKGRpc3RyaWN0X2lkKVxuICAgICAgICBSRUZFUkVOQ0VTIGV4ZWN1dGlvbl9kaXN0cmljdCAoaWQpIE1BVENIIEZVTExcbiAgICAgICAgT04gVVBEQVRFIFJFU1RSSUNUXG4gICAgICAgIE9OIERFTEVURSBSRVNUUklDVFxuKVxuXG5DUkVBVEUgVEFCTEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBleGVjdXRpb25fZGlzdHJpY3RcbihcbiAgICBpZCAgICAgICAgICAgICAgICAgIHNlcmlhbCBOT1QgTlVMTCwgICAgLS0g0ZbQtNC10L3RgtC40YTRltC60LDRgtC+0YAg0LLQuNC60L7QvdCw0LLRh9C+0LPQviDQvtC60YDRg9Cz0YNcbiAgICBkaXN0cmljdF9uYW1lICAgICAgIHRleHQgTk9UIE5VTEwsICAgICAgLS0g0L3QsNC30LLQsCDQvtC60YDRg9Cz0YNcbiAgICBDT05TVFJBSU5UIGV4ZWN1dGlvbl9kaXN0cmljdF9wa2V5IFBSSU1BUlkgS0VZIChpZClcbilcblxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdXNlclxuKFxuICAgIGxvZ2luICAgICAgICAgICAgIHRleHQgTk9UIE5VTEwsICAgIC0tINC70L7Qs9GW0L0g0LrQvtGA0LjRgdGC0YPQstCw0YfQsFxuICAgIGZ1bGxuYW1lICAgICAgICAgIHRleHQgTk9UIE5VTEwsICAgIC0tINCf0IbQkVxuICAgIHJvbGUgICAgICAgICAgICAgIGludCBOT1QgTlVMTCwgICAgIC0tINGA0L7Qu9GMKNCQ0LTQvNGW0L3RltGB0YLRgNCw0YLQvtGAL9GA0LXRlNGB0YLRgNCw0YLQvtGAKVxuICAgIGRhdGVfcmVnaXN0cmF0aW9uIHRleHQgTk9UIE5VTEwsICAgIC0tINC00LDRgtCwINGA0LXRlNGB0YLRgNCw0YbRltGXXG4gICAgcHdkX2hhc2ggICAgICAgICAgdGV4dCBOT1QgTlVMTCwgICAgLS0g0YXQtdGIINC/0LDRgNC+0LvRjlxuICAgIGlzX2FjdGl2ZSAgICAgICAgIGJvb2xlYW4gTk9UIE5VTEwsIC0tINGB0YLQsNGC0YPRgSjQtNGW0LnRgdC90LjQuS/QstC40LzQutC90LXQvdC40LkpXG4gICAgYWRkaXRpb25hbF9kYXRhICAgdGV4dCBOT1QgTlVMTCwgICAgLS0g0LTQvtC00LDRgtC60L7QstGWINC00LDQvdGWXG4gICAgXG4gICAgQ09OU1RSQUlOVCB1c2Vyc19wa2V5IFBSSU1BUlkgS0VZIChsb2dpbilcbiAgICBDT05TVFJBSU5UIGZ1bGxuYW1lX3VrZXkgVU5JUVVFKGZ1bGxuYW1lKVxuKVxuXG5DUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBqb3VybmFsX2V2ZW50XG4oXG4gICAgaWQgICAgICAgICAgIHNlcmlhbCBOT1QgTlVMTCwgLS0gaWQg0L/QvtC00ZbRl1xuICAgIHVzZXJfbG9naW4gICB0ZXh0IE5PVCBOVUxMLCAgIC0tINC70L7Qs9GW0L0g0LrQvtGA0LjRgdGC0YPQstCw0YfQsFxuICAgIGV2ZW50X2RhdGUgICBkYXRlIE5PVCBOVUxMLCAgIC0tINC00LDRgtCwINC/0L7QtNGW0ZdcbiAgICBldmVudF90eXBlICAgaW50IE5PVCBOVUxMLCAgICAtLSDRgtC40L8g0L/QvtC00ZbRl1xuICAgIHJvd19hZmZlY3RlZCB0ZXh0IE5PVCBOVUxMLCAgIC0tINGB0YLRgNC+0LrQsCDRgtCw0LHQu9C40YbRliDQtNC1INC/0L7QtNGW0Y8g0LLRltC00LHRg9C70LDRgdGPXG4gICAgbmV3X3ZhbHVlICAgIHRleHQgTk9UIE5VTEwsICAgLS0g0L3QvtCy0LUg0LfQvdCw0YfQtdC90L3Rj1xuICAgIHVzZXJfaXAgICAgICB0ZXh0IE5PVCBOVUxMLCAgIC0tINCGUCDQutC+0YDQuNGB0YLRg9Cy0LDRh9CwLCDRidC+INGB0L/RgNC40YfQuNC90LjQsiDQv9C+0LTRltGOXG5cbiAgICBDT05TVFJBSU5UIGpvdXJuYWxfYWN0aW9uc19wa2V5IFBSSU1BUlkgS0VZIChpZCksXG4gICAgQ09OU1RSQUlOVCBqb3VybmFsX2V2ZW50X3RvX3VzZXJfZmtleSBGT1JFSUdOIEtFWSAodXNlcl9sb2dpbilcbiAgICAgICAgUkVGRVJFTkNFUyB1c2VyIChsb2dpbikgTUFUQ0ggRlVMTFxuICAgICAgICBPTiBVUERBVEUgUkVTVFJJQ1RcbiAgICAgICAgT04gREVMRVRFIFJFU1RSSUNUXG4pYFxuXHQpXG4pOyovIl19